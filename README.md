# Sequelize Migrations Task (Node.js + Express + TypeScript + Sequelize)

## üëã Welcome Pratham!

You're tasked with extending a backend project built with **Node.js**, **Express**, and **TypeScript** by introducing Sequelize ORM support via models and migrations.

Follow this guide step by step. You‚Äôll be forking the repo, setting up Sequelize for TypeScript, creating models, writing raw query-based migrations, and raising PRs as outlined below.

---

## üìã Objectives

You need to:

1. Set up Sequelize with TypeScript compatibility.
2. Create **2 models** with corresponding **migrations**:
   - `User`
   - `Post`
3. Create a **foreign key migration** linking `Post.userId` ‚Üí `User.id`.
4. Raise **3 PRs**:
   - PR #1: `user.model.ts` + `create-users-table.migration.ts`
   - PR #2: `post.model.ts` + `create-posts-table.migration.ts`
   - PR #3: `add-userid-fk-to-posts.migration.ts`

---

## ‚öôÔ∏è Tech Stack

- Node.js + Express
- TypeScript
- Sequelize (with CLI)
- MySQL (local database)
- Raw SQL inside Sequelize migrations

---

## üöÄ Getting Started

### 1. Fork & Clone

Fork the given repository into your GitHub account, then:

```bash
    git clone <your-fork-url>
    cd <repo-folder>
    npm install
```

### 2. Initialize Sequelize (with force overwrite)

```bash
    run this command -> npx sequelize-cli init --force

    This creates a /db folder with:

    db/models/
    db/migrations/
    db/seeders/
```

### 3. Configure Sequelize for TypeScript
# Edit: configs/sequelize.config.ts
# Replace any autogenerated JSON content with:

```bash
    require('ts-node/register');
    const config = require('./db.config');
    module.exports = config;
```


### 4. Create .env File
# Create a .env file at the project root:
```bash
    PORT=3000
    DB_NAME=your_database_name
    DB_HOST=localhost
    DB_USER=root
    DB_PASSWORD=your_password
```


### 5. Create Sequelize Instance
# Create a new file: db/models/sequelize.ts

```bash
    import { Sequelize } from 'sequelize';

    import { dbConfig } from '../../configs/server.config';

    const sequelize = new Sequelize({
        dialect: 'mysql',
        host: dbConfig.DB_HOST,
        username: dbConfig.DB_USER,
        password: dbConfig.DB_PASSWORD,
        database: dbConfig.DB_NAME,
        logging: true
    });

    export default sequelize;
```


### 6. Define Models
    Model: User
    Create: db/models/user.model.ts -> columns -> (id, name, email)

    Model: Post
    Create: db/models/post.model.ts -> columns -> (id, title, content, userId(FK references to users table))

    This should be typescript comatible models(using classes that extends Model class)


### 7. Generate Migrations
    Use this command: npm run migration:generate your-migration-name.migration (mentioned in package.json)
    This creates a .js file in db/migrations/. Rename it to .ts, and update it to use raw SQL: create-users-table.migration.ts
    Create similar migration for Posts table, and finally one migration to add foreign key migration


### Submission Instructions

## You must raise 3 Pull Requests:
PR #1 ‚Üí user.model.ts + create-users-table.migration.ts

PR #2 ‚Üí post.model.ts + create-posts-table.migration.ts

PR #3 ‚Üí Foreign key migration add-userid-fk-to-posts.migration.ts
## Write meaningfull commit messages

# Each PR must be from its own feature branch.

# Check your schema using any DB viewer using MySQL Workbench.

## Tips
Don't forget to define timestamps in your raw SQL.

Ensure the order of PRs is followed (foreign key only works after both tables exist).

Your migrations must use raw SQL (no createTable helper).

Commit only what‚Äôs necessary for the migration/model in each PR.


### Also maintain all the linting strategy I have created with ESLint
## If You do not have ESLint extension installed in you vs code then install it by searching eslint and then paste the below mentioned configuration in settings.json file in vs code

```bash
    "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
    },
  "eslint.validate": [
    "javascript",
    "typescript",
    "javascriptreact",
    "html",
    "typescriptreact"
  ],
  "editor.formatOnSave": false, // disable if using Prettier separately
```

# Now when you save the file or type ctrl + s your file will be linted properly and all the linting issues will be gone